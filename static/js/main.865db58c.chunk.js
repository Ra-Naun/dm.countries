(this["webpackJsonpdm.countries"]=this["webpackJsonpdm.countries"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(7),s=n.n(a),o=(n(32),n(33),n(6)),u=n(11),i=n(4),l=n(13),d=n(21),h=n.n(d),j=n(18),f=(n(38),n(39),n(0)),b=function(e){var t=e.isChecked,n=e.filterID,r=e.title,c=e.toggleChecked;return Object(f.jsxs)("label",{className:"label-for-checkbox",children:[Object(f.jsx)("input",{checked:t,onChange:function(){return c(n)},type:"checkbox",className:"checkbox",name:"checkbox"}),Object(f.jsx)("span",{className:"checkbox__style"}),Object(f.jsx)("p",{className:"checkbox__title",children:r})]})},O=function(e){var t=e.search,n=e.classes,c=e.role,a=Object(r.useState)(""),s=Object(l.a)(a,2),o=s[0],d=s[1],O=Object(r.useState)(!1),m=Object(l.a)(O,2),y=m[0],C=m[1],p=Object(r.useRef)(null),x=Object(r.useState)({byName:!0,byCode:!0}),v=Object(l.a)(x,2),g=v[0],_=v[1],S=function(e){_(Object(i.a)(Object(i.a)({},g),{},Object(u.a)({},e,!g[e])))};return Object(r.useEffect)((function(){y&&j.a.warn("\u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0435\u043f\u0440\u0438\u043d\u044f\u0442\u043e\u0435 \u0430\u043d\u0433\u043b\u043e\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")}),[y]),Object(f.jsx)("form",{action:"",className:"search-form "+n,children:Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsx)("input",{className:"input ".concat(h()({isError:y})),ref:p,type:"search",id:"search-country",name:"q",placeholder:c,value:o,"aria-label":c,onChange:function(e){var t=e.target.value;d(t);/^[a-zA-Z]+$/.test(t)||0===t.length?C(!1):C(!0)}}),Object(f.jsx)("button",{className:"SF-search-btn btn",title:"search...",onClick:function(e){e.preventDefault(),!y&&o.length>0?t(o,g):j.a.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")},children:Object(f.jsx)("i",{className:"fa fa-search","aria-hidden":"true"})}),Object(f.jsxs)("div",{className:"search-form__checkboxes",children:[Object(f.jsx)(b,{isChecked:g.byName,filterID:"byName",toggleChecked:S,title:"By name"}),Object(f.jsx)(b,{isChecked:g.byCode,filterID:"byCode",toggleChecked:S,title:"By code"})]})]})})},m=n(3),y=n(5),C=n.n(y),p=n(9),x="@@SearchedCountries/COUNTRIES_REQUEST",v="@@SearchedCountries/COUNTRIES_SUCCESS",g="@@SearchedCountries/COUNTRIES_FAIL",_="@@selectedCountry/SET_SELECTED_COUNTRY",S="@@selectedCountry/RESET_SELECTED_COUNTRY",N="@@FavoriteCountries/PUSH_FAVORITE_COUNTRY",E="@@FavoriteCountries/REMOVE_FAVORITE_COUNTRY",k="@@CountriesCach/UPDATE_CACHE",R=function(){var e=Object(p.a)(C.a.mark((function e(t,n){var r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t).concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:if(400!==(c=e.sent).status&&404!==c.status){e.next=9;break}throw new Error(c.message);case 9:return e.abrupt("return",[c]);case 12:return e.prev=12,e.t0=e.catch(0),console.log("error: ",e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(e){var t=[];return e.forEach((function(e){var n=e.alpha3Code||e.code,r=!0;t.forEach((function(e){(e.alpha3Code||e.code)===n&&(r=!1)})),r&&t.push(e)})),t},F=function(e){var t=[];return e.forEach((function(e){var n={code:e.alpha3Code||e.code,name:e.name,flag:e.flag,languages:e.languages,border_countries:e.borders};t.push(n)})),t},T=function(e){var t=Object(m.a)(e);return t.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),t},w=function(e){return function(t){return function(n){return n({type:e,payload:t})}}},I=w(k),U=w(x),L=w(v),D=w(g),z=(w("@@SearchedCountries/SET_FILTERS"),function(){var e=Object(p.a)(C.a.mark((function e(t,n){var r,c,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],"https://restcountries.eu/rest/v2/alpha/",e.t0=n.byCode,!e.t0){e.next=7;break}return e.next=6,R("https://restcountries.eu/rest/v2/alpha/",t);case 6:e.t0=e.sent;case 7:if(c=e.t0,r=[].concat(Object(m.a)(r),Object(m.a)(c||[])),"https://restcountries.eu/rest/v2/name/",e.t1=n.byName,!e.t1){e.next=15;break}return e.next=14,R("https://restcountries.eu/rest/v2/name/",t);case 14:e.t1=e.sent;case 15:return a=e.t1,r=[].concat(Object(m.a)(r),Object(m.a)(a[0]||[])),r=B(r),r=F(r),r=T(r),e.abrupt("return",r);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(o.b)(null,(function(e){return{search:function(t,n){return e(function(e,t){return function(){var n=Object(p.a)(C.a.mark((function n(r){var c,a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(U()),n.next=3,z(e,t);case 3:(c=n.sent).length>0?(r(I(c)),a=[],c.forEach((function(e){a.push({code:e.code})})),r(L(a))):r(D("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0430\u0439\u0442\u0438..."));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){var t=e.search;return Object(f.jsx)(O,{search:t,classes:"search-countries",role:"Search countries"})})),M=(n(42),n(43),n(44),function(){return Object(f.jsx)("div",{className:"spinner"})}),P=function(e){var t=e.lazzyLoadByCode,n=e.country,r=e.setSelectedCountryByCode,c=e.index,a=e.clearSearchResults,s=e.isClear,o=void 0!==s&&s,u=n.flag,i=n.name,l=n.code,d=n.needLoaded;d&&t(l);var h=Object(f.jsxs)("li",{className:"country-short-info",onClick:function(){r(l),o&&(console.log("||| isClear"),a())},children:[Object(f.jsxs)("p",{className:"country-short-info__num",children:["\u27a3 ",c+1]}),Object(f.jsx)("img",{height:"15px",className:"country-short-info__flag",src:u,alt:"flag"}),Object(f.jsx)("p",{className:"country-short-info__name",children:i})]});return d?Object(f.jsxs)("li",{className:"country-short-info",children:[Object(f.jsxs)("p",{className:"country-short-info__num",children:["\u27a3 ",c+1]}),Object(f.jsx)("p",{className:"country-short-info__name",children:l}),Object(f.jsx)(M,{})]}):h},Y=Object(o.b)(null,(function(e){return{lazzyLoadByCode:function(t){return e(function(e){return function(){var t=Object(p.a)(C.a.mark((function t(n){var r,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={byName:!1,byCode:!0},t.next=3,z(e,r);case 3:c=t.sent,n(I(c));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},clearSearchResults:function(){return e(L([]))}}}))((function(e){var t=e.lazzyLoadByCode,n=e.country,r=e.setSelectedCountryByCode,c=e.index,a=e.clearSearchResults,s=e.isClear;return Object(f.jsx)(P,{lazzyLoadByCode:t,country:n,setSelectedCountryByCode:r,index:c,clearSearchResults:a,isClear:s})})),V=function(e){var t=e.selectedCountry,n=e.setSelectedCountryByCode,r=(e.resetSelectedCountry,t.flag),c=t.name,a=t.code,s=t.languages,o=t.border_countries;console.log("||| languages: ",s);var u=Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{height:"15px",className:"country-information__flag",src:r,alt:"flag"}),Object(f.jsx)("p",{className:"country-information__name",children:c}),Object(f.jsx)("p",{className:"country-information__code",children:"ISO 3166-1 alpha-3:  ".concat(a)}),Object(f.jsxs)("ol",{className:"country-information__languages",children:["\u042f\u0437\u044b\u043a\u0438:",s.map((function(e){return Object(f.jsx)("li",{className:"country-information__lang",children:"\u2022 ".concat(e.name)},e.name)}))]}),Object(f.jsxs)("details",{className:"border-countries",children:[Object(f.jsxs)("summary",{className:"border-countries__summary",children:["C\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0430\u043d\u0438\u0447\u043d\u044b\u0445 \u0441\u0442\u0440\u0430\u043d ","[".concat(o.length,"]")]}),Object(f.jsx)("ol",{className:"border-countries_list",children:o.map((function(e,t){var r=e.name||e.code;return Object(f.jsx)(Y,{country:e,index:t,setSelectedCountryByCode:n,isClear:!0},r)}))})]})]});return Object(f.jsxs)("div",{className:"country-information",children:[Object(f.jsx)("p",{className:"country-information__title title",children:"Country information:"}),u]})},H=w(_),J=w(S);function q(e,t){var n=e.countriesCache.filter((function(e){return e.code===t}))[0];return n||{code:t,needLoaded:!0}}function Q(e){var t=e.selectedCountry.code;if(!!t){var n=q(e,t),r=n.border_countries.map((function(t){return q(e,t.code||t)}));return n.border_countries=r,n}return null}function Z(e){var t=e.searchedCountries.countries,n=Object(i.a)({},e.searchedCountries);return n.countries=t.map((function(t){return q(e,t.code)})),n}var $=Object(o.b)((function(e){return{selectedCountry:Q(e),shouldComponentUpdate:e.countriesCache}}),(function(e){return{setSelectedCountryByCode:function(t){return e(H(t))},resetSelectedCountry:function(){return e(J())}}}))((function(e){var t=e.selectedCountry,n=e.setSelectedCountryByCode,r=e.resetSelectedCountry;e.shouldComponentUpdate;return(null===t||void 0===t?void 0:t.code)?Object(f.jsx)(V,{selectedCountry:t,setSelectedCountryByCode:n,resetSelectedCountry:r}):null})),G=(n(45),n(46),function(e){var t=e.searchedCountries,n=e.setSelectedCountryByCode,c=e.resetSelectedCountry,a=e.clearSearchResults,s=t.isFetching,o=t.error,u=t.countries;Object(r.useEffect)((function(){1!==u.length&&c()}),[s]);var i=Object(f.jsx)("ol",{className:"search-results__countries",children:u.map((function(e,t){return Object(f.jsx)(Y,{country:e,index:t,setSelectedCountryByCode:n},e.code)}))}),l=Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("p",{className:"search-results__error",children:o})}),d=Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"search-results__fetching",children:Object(f.jsx)(M,{})})}),h=s?d:o?l:i;return 1===u.length&&(n(u[0].code),a()),Object(f.jsxs)("div",{className:"search-results",children:[Object(f.jsxs)("p",{className:"search-results__title title",children:["Search results ","["+u.length+"]",":"]}),h]})}),K=Object(o.b)((function(e){return{searchedCountries:Z(e)}}),(function(e){return{setSelectedCountryByCode:function(t){return e(H(t))},resetSelectedCountry:function(){return e(J())},clearSearchResults:function(){return e(L([]))}}}))((function(e){var t=e.searchedCountries,n=e.setSelectedCountryByCode,r=e.resetSelectedCountry,c=e.clearSearchResults,a=t.isFetching,s=t.error;return(t.countries.length||s||a)&&Object(f.jsx)(G,{searchedCountries:t,setSelectedCountryByCode:n,resetSelectedCountry:r,clearSearchResults:c})})),W=function(){return Object(f.jsxs)("div",{className:"main-content",children:[Object(f.jsx)("p",{className:"main-content__title title",children:"Main content:"}),Object(f.jsx)($,{}),Object(f.jsx)(K,{})]})},X=(n(47),n(48),function(){return Object(f.jsx)("div",{className:"my-favorites",children:Object(f.jsx)("p",{className:"my-favorites__title title",children:"My favorites:"})})}),ee=function(){return Object(f.jsxs)("main",{className:"body container",children:[Object(f.jsxs)("div",{className:"search-block",children:[Object(f.jsx)(A,{}),Object(f.jsx)(W,{})]}),Object(f.jsx)(X,{})]})},te=n.p+"static/media/logo.6ce24c58.svg",ne=function(){return Object(f.jsxs)("header",{className:"app__header",children:[Object(f.jsx)("img",{className:"app__logo",src:te,alt:"logo"}),Object(f.jsx)("p",{className:"app__title title",children:"Search countries"})]})},re=n(22),ce=n(23),ae=n(27),se=n(26),oe=function(e){Object(ae.a)(n,e);var t=Object(se.a)(n);function n(e){var r;return Object(re.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(ce.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(t)}},{key:"render",value:function(){return this.state.hasError?Object(f.jsx)("h1",{children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(c.a.Component);var ue=function(){return Object(f.jsxs)(oe,{children:[Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)(ne,{}),Object(f.jsx)(ee,{})]})," "]})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},le=n(8),de={code:null},he={countries:[],isFetching:!1,error:""},je=[],fe=[],be=Object(le.c)({selectedCountry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{code:t.payload};case S:return de;default:return e}},searchedCountries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(i.a)(Object(i.a)({},e),{},{isFetching:!0});case v:return Object(i.a)(Object(i.a)({},e),{},{countries:t.payload,isFetching:!1,error:""});case g:return Object(i.a)(Object(i.a)({},e),{},{countries:[],isFetching:!1,error:t.payload});default:return e}},favoriteCountries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return[].concat(Object(m.a)(e),Object(m.a)(t.payload));case E:return e.filter((function(e){return e!==t.payload}));default:return e}},countriesCache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:var n=e,r=t.payload,c=[].concat(Object(m.a)(n),Object(m.a)(r));return c=B(c),Object(m.a)(c);default:return e}}}),Oe=n(24),me=n.n(Oe),ye=n(25),Ce=Object(le.d)(be,Object(le.a)(ye.a,me.a));s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(o.a,{store:Ce,children:Object(f.jsx)(ue,{})})}),document.getElementById("root")),ie()}},[[49,1,2]]]);
//# sourceMappingURL=main.865db58c.chunk.js.map